.left
  %h1 #{@collection.title}

.right
  = check_box_tag :checked, @collection.complete, @collection.complete, :disabled => true
  Collection complete

  = check_box_tag :private, @collection.private, @collection.private, :disabled => true
  Private
  
.clear

.twoup-1
  %fieldset
    %legend Collection Details
    %table.form.show
      %tr
        %th Collection ID
        %td= @collection.identifier

      %tr
        %th Collector
        %td= @collection.collector.name

      %tr
        %th Operator
        - if @collection.operator
          %td= @collection.operator.name

      %tr
        %th Originating University
        %td= @collection.university_name

      %tr
        %th Field of Research
        %td= @collection.field_of_research.name_with_identifier

      %tr
        %th Countries
        %td
          - @collection.countries.each do |country|
            #{country.name_with_code}
            %br

      %tr
        %th Languages
        %td
          - @collection.languages.each do |language|
            #{language.name_with_code}
            %br

      %tr
        %th Region / Village
        %td= @collection.region

      %tr
        %th Latitude
        %td= @collection.latitude

      %tr
        %th Longitude
        %td= @collection.longitude

      %tr
        %th Zoom
        %td= @collection.zoom

      %tr
        %td.empty{:colspan => 2}
          .map{:data => {:latitude => @collection.latitude, :longitude => @collection.longitude, :zoom => @collection.zoom, :static => true}}


      %tr
        %th Description
        %td= @collection.description

  - if can? :manage, Collection
    %fieldset
      %legend Access Information
      %table.form.show
        %tr
          %th User Access
          %td
            - @collection.admins.each do |admin|
              = admin.name
              %br

        %tr
          %th Access conditions
          -if @collection.access_condition
            %td= @collection.access_condition.name
          -else
            %td

        %tr
          %th Access Narative
          %td= @collection.access_narrative



.twoup-2
  %fieldset
    %legend Items in Collection
    %table.table.show
      %tr
        %th Item
        %th Title
        - if can? :update, @collection
          %th Ready
          %th Archived
        %th Actions
      - @collection.items.each do |item|
        %tr
          %td= item.identifier
          %td= item.title
          - if can? :update, @collection
            %td TBI
            %td TBI
          %td
            = link_to 'View', item if can? :read, item
            = link_to 'Edit', edit_item_path(item) if can? :update, item
    %button
      = link_to 'Add Item', new_collection_item_path(@collection) if can? :create, @collection.items.build # TODO this acutally adds an item to the array is there a better way


  - if can? :manage, Collection
    %fieldset
      %legend Depositing Information
      %table.form.show
        %tr
          %th Metadata Source
          %td= @collection.metadata_source

        %tr
          %th Orthographic Notes
          %td= @collection.orthographic_notes

        %tr
          %th media
          %td= @collection.media

        %tr
          %th Date created
          %td= @collection.created_at

        %tr
          %th Date modified
          %td= @collection.updated_at

        %tr
          %th Comments
          %td= @collection.comments

    %fieldset
      %legend Admin Information
      %table.form.show

        %tr
          %td.empty
          %td
            = check_box_tag :deposit_form_recieved, @collection.deposit_form_recieved, @collection.deposit_form_recieved, :disabled => true
            Collection complete

        %tr
          %th Location tapes stored
          %td= @collection.tape_location

    %button
      = link_to 'Edit Collection', edit_collection_path(@collection)
